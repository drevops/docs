"use strict";(self.webpackChunkscaffold=self.webpackChunkscaffold||[]).push([[5075],{91:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var o=i(4848),n=i(8453);const r={},s="Git artifact",a={id:"tools/git-artifact",title:"Git artifact",description:"https://github.com/drevops/git-artifact",source:"@site/content/tools/git-artifact.mdx",sourceDirName:"tools",slug:"/tools/git-artifact",permalink:"/tools/git-artifact",draft:!1,unlisted:!1,editUrl:"https://github.com/drevops/scaffold/tree/develop/.scaffold/docs/content/tools/git-artifact.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Drush",permalink:"/tools/drush"},next:{title:"Hadolint",permalink:"/tools/hadolint"}},c={},l=[{value:"Usage",id:"usage",level:2},{value:"Configuration",id:"configuration",level:2}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"git-artifact",children:"Git artifact"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.a,{href:"https://github.com/drevops/git-artifact",children:"https://github.com/drevops/git-artifact"})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"Package and push files to remote repositories"}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["Some hosting providers, like Acquia, restrict certain build operations, making\nit necessary to develop and build your site elsewhere before deploying it. This\ntool streamlines that process: it uses a ",(0,o.jsx)(t.code,{children:".gitignore.artifact"})," file to control\nwhich files get transferred, and overwrites the destination repository's history\nwith each push, while preserving the source history."]}),"\n",(0,o.jsxs)(t.p,{children:["Scaffold comes\nwith ",(0,o.jsxs)(t.a,{href:"https://github.com/drevops/scaffold/blob/develop/.gitignore.artifact",children:["pre-configured ",(0,o.jsx)(t.code,{children:".gitignore.artifact"})]}),"\nfile and ",(0,o.jsx)(t.a,{href:"https://github.com/drevops/scaffold/blob/develop/scripts/drevops/deploy-artifact.sh",children:"deployment script"}),"\nto build the artifact in CI and push it to the remote repository in Acquia."]}),"\n",(0,o.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(t.p,{children:"This tool is used in CI and does not require any manual actions."}),"\n",(0,o.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsxs)(t.p,{children:["The deployment targets can be added to the ",(0,o.jsx)(t.code,{children:".gitignore.artifact"})," file: it will\nreplace the standard ",(0,o.jsx)(t.code,{children:".gitignore"})," file in the artifact repository."]}),"\n",(0,o.jsx)(t.p,{children:"The file already contains all required targets to get the full site build with\nproduction-only dependencies (dev-dependencies are excluded from the code\nartifact during the CI build)."}),"\n",(0,o.jsxs)(t.p,{children:["Modifying targets in the ",(0,o.jsx)(t.code,{children:".gitignore.artifact"})," file works just like updating\na regular ",(0,o.jsx)(t.code,{children:".gitignore"})," file."]}),"\n",(0,o.jsx)(t.p,{children:"It is required to set the following environment variables in CI:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"DREVOPS_DEPLOY_ARTIFACT_GIT_USER_NAME"}),": Email address of the user who will be\ncommitting to a remote repository."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"DREVOPS_DEPLOY_ARTIFACT_GIT_USER_EMAIL"}),": Name of the user who will be\ncommitting to a remote repository."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>a});var o=i(6540);const n={},r=o.createContext(n);function s(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);