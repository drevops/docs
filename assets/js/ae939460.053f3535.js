"use strict";(self.webpackChunkscaffold=self.webpackChunkscaffold||[]).push([[2956],{451:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>a,frontMatter:()=>l,metadata:()=>t,toc:()=>d});var r=i(4848),s=i(8453);const l={},o="Twig CS Fixer",t={id:"tools/twig-cs-fixer",title:"Twig CS Fixer",description:"https://github.com/VincentLanglet/Twig-CS-Fixer",source:"@site/content/tools/twig-cs-fixer.mdx",sourceDirName:"tools",slug:"/tools/twig-cs-fixer",permalink:"/tools/twig-cs-fixer",draft:!1,unlisted:!1,editUrl:"https://github.com/drevops/scaffold/tree/develop/.scaffold/docs/content/tools/twig-cs-fixer.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Renovate",permalink:"/tools/renovate"},next:{title:"Xdebug",permalink:"/tools/xdebug"}},c={},d=[{value:"Usage",id:"usage",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Ignoring",id:"ignoring",level:2},{value:"Ignoring fail in CI",id:"ignoring-fail-in-ci",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"twig-cs-fixer",children:"Twig CS Fixer"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/VincentLanglet/Twig-CS-Fixer",children:"https://github.com/VincentLanglet/Twig-CS-Fixer"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"The missing checkstyle for twig!"}),"\n",(0,r.jsx)(n.p,{children:"Twig CS Fixer aims to be what phpcs is to php. It checks your codebase for violations on coding standards."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["DrevOps Scaffold comes with ",(0,r.jsx)(n.a,{href:"https://github.com/drevops/scaffold/blob/develop/.twig-cs-fixer.php",children:"pre-configured Twig-cs-fixer ruleset"})," for Drupal projects."]}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"vendor/bin/twig-cs-fixer\n"})}),"\n",(0,r.jsx)(n.p,{children:"or"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ahoy lint-fe\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"https://github.com/VincentLanglet/Twig-CS-Fixer/blob/main/docs/configuration.md",children:"configuration reference"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["All global configuration takes place in the ",(0,r.jsx)(n.a,{href:"https://github.com/drevops/scaffold/blob/develop/.twig-cs-fixer.php",children:(0,r.jsx)(n.code,{children:".twig-cs-fixer.php"})})," file."]}),"\n",(0,r.jsx)(n.p,{children:"Targets include custom modules and themes."}),"\n",(0,r.jsx)(n.p,{children:"Adding or removing targets:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$ruleset = new TwigCsFixer\\Ruleset\\Ruleset();\n$ruleset->addStandard(new TwigCsFixer\\Standard\\Twig());\n\n$finder = new TwigCsFixer\\File\\Finder();\n$finder->in(__DIR__ . '/web/modules/custom');\n$finder->in(__DIR__ . '/web/themes/custom');\n\n$config = new TwigCsFixer\\Config\\Config();\n$config->setRuleset($ruleset);\n$config->setFinder($finder);\n\nreturn $config;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ignoring",children:"Ignoring"}),"\n",(0,r.jsxs)(n.p,{children:["Ignoring rules ",(0,r.jsx)(n.strong,{children:"globally"})," takes place in the  ",(0,r.jsx)(n.a,{href:"https://github.com/drevops/scaffold/blob/develop/.twig-cs-fixer.php",children:(0,r.jsx)(n.code,{children:".twig-cs-fixer.php"})})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-php",children:"$finder->exclude('myCustomDirectory');\n"})}),"\n",(0,r.jsxs)(n.p,{children:["All errors have an identifier with the syntax: ",(0,r.jsx)(n.code,{children:"A.B:C:D"})," with"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"A"}),": The rule short name (mainly made from the class name)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"B"}),": The error identifier (like the error level or a specific name)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"C"}),": The line the error occurs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"D"}),": The position of the token in the line the error occurs"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The four parts are optional, all those format are working"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"A"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"A.B"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"A.B:C"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"A.B:C:D"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"A:C"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"A:C:D"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"A::D"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["If you need to know the errors identifier you have/want to ignore, you can run\nthe linter command with the ",(0,r.jsx)(n.code,{children:"--debug"})," option."]}),"\n",(0,r.jsxs)(n.p,{children:["To ignore ",(0,r.jsx)(n.strong,{children:"all Twig CS Fixer rules"})," within a file, place in the file header:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-twig",children:"{# twig-cs-fixer-disable #}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To ignore ",(0,r.jsx)(n.strong,{children:"a specific rule"})," within a file, place in the file header:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-twig",children:"{# twig-cs-fixer-disable A.B:C:D #}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Twig CS Fixer does not support ignoring of the ",(0,r.jsx)(n.strong,{children:"code blocks"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["To ignore only the ",(0,r.jsx)(n.strong,{children:"current line"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-twig",children:"{# twig-cs-fixer-disable-next-line A.B:C:D #}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To ignore only the ",(0,r.jsx)(n.strong,{children:"next line"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-twig",children:"{# twig-cs-fixer-disable-line A.B:C:D #}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ignoring-fail-in-ci",children:"Ignoring fail in CI"}),"\n",(0,r.jsx)(n.p,{children:"This tool runs in CI by default and fails the build if there are any violations."}),"\n",(0,r.jsxs)(n.p,{children:["Set ",(0,r.jsx)(n.code,{children:"DREVOPS_CI_TWIG_CS_FIXER_IGNORE_FAILURE"})," environment variable to ",(0,r.jsx)(n.code,{children:"1"})," to\nignore failures. The tool will still run and report violations, if any."]})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var r=i(6540);const s={},l=r.createContext(s);function o(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);